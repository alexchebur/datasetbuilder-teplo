<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚öñÔ∏è –°–±–æ—Ä—â–∏–∫ –¥–∞—Ç–∞—Å–µ—Ç–∞ —Å—É–¥–µ–±–Ω—ã—Ö –∞–∫—Ç–æ–≤</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <nav class="navbar navbar-dark bg-dark">
        <div class="container-fluid">
            <span class="navbar-brand mb-0 h1">‚öñÔ∏è –°–±–æ—Ä—â–∏–∫ –¥–∞—Ç–∞—Å–µ—Ç–∞ —Å—É–¥–µ–±–Ω—ã—Ö –∞–∫—Ç–æ–≤</span>
            <span class="navbar-text" id="dataset-count">–ó–∞–ø–∏—Å–µ–π: 0</span>
        </div>
    </nav>

    <div class="container-fluid py-4">
        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="card stats-card">
                    <div class="card-body">
                        <h5 class="card-title" id="stat-records">0</h5>
                        <p class="card-text">–ó–∞–ø–∏—Å–µ–π –≤ –¥–∞—Ç–∞—Å–µ—Ç–µ</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card stats-card">
                    <div class="card-body">
                        <h5 class="card-title" id="stat-processed">0</h5>
                        <p class="card-text">–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Ñ–∞–π–ª–æ–≤</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card stats-card">
                    <div class="card-body">
                        <h5 class="card-title" id="stat-chars">0</h5>
                        <p class="card-text">–°–∏–º–≤–æ–ª–æ–≤ —Ç–µ–∫—Å—Ç–∞</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card stats-card">
                    <div class="card-body">
                        <h5 class="card-title" id="stat-date-range">-</h5>
                        <p class="card-text">–î–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ó–∞–≥—Ä—É–∑–∫–∞ JSONL -->
        <div class="card mb-4">
            <div class="card-header">üì• –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –¥–∞—Ç–∞—Å–µ—Ç (JSONL)</div>
            <div class="card-body">
                <p class="card-text">–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ä–∞–Ω–µ–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π JSONL –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã</p>
                <div class="input-group">
                    <input type="file" class="form-control" id="jsonl-upload" accept=".jsonl,.json">
                    <button class="btn btn-primary" type="button" id="btn-load-jsonl">üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞—Ç–∞—Å–µ—Ç</button>
                </div>
                <div id="load-status" class="mt-2"></div>
            </div>
        </div>

        <!-- –ó–∞–≥—Ä—É–∑–∫–∞ PDF -->
        <div class="card mb-4">
            <div class="card-header">üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å—É–¥–µ–±–Ω—ã–µ –∞–∫—Ç—ã (PDF)</div>
            <div class="card-body">
                <p class="card-text">
                    –§–æ—Ä–º–∞—Ç –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞: <code>A60-36858-2025_20251003_Reshenija.pdf</code><br>
                    –ì–¥–µ <code>A60-36858-2025</code> ‚Äî –Ω–æ–º–µ—Ä –¥–µ–ª–∞, <code>20251003</code> ‚Äî –¥–∞—Ç–∞ —Ä–µ—à–µ–Ω–∏—è
                </p>
                <div class="input-group mb-3">
                    <input type="file" class="form-control" id="pdf-upload" accept=".pdf" multiple>
                    <button class="btn btn-success" type="button" id="btn-process" disabled>üîÑ –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ñ–∞–π–ª—ã</button>
                </div>
                <div id="process-progress-container">
                    <div class="progress">
                        <div class="progress-bar progress-bar-striped progress-bar-animated" 
                             id="process-progress" role="progressbar" style="width: 0%">0%</div>
                    </div>
                    <div id="process-status" class="mt-2"></div>
                </div>
            </div>
        </div>

        <!-- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä -->
        <div class="card mb-4" id="preview-section" style="display: none;">
            <div class="card-header">üëÅ –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –¥–∞—Ç–∞—Å–µ—Ç–∞</div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <label for="preview-select" class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–ø–∏—Å—å...</label>
                        <select class="form-select" id="preview-select"></select>
                        
                        <div id="preview-metadata" class="mt-3"></div>
                        
                        <!-- –ß–µ–∫–±–æ–∫—Å—ã –æ–±–∂–∞–ª–æ–≤–∞–Ω–∏—è -->
                        <div class="mt-3 p-3 bg-light rounded" id="appeal-status-section">
                            <h6>üìã –°—Ç–∞—Ç—É—Å –æ–±–∂–∞–ª–æ–≤–∞–Ω–∏—è</h6>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="checkbox-appealed">
                                <label class="form-check-label" for="checkbox-appealed">
                                    –û–±–∂–∞–ª–æ–≤–∞–ª–æ—Å—å –≤ –∞–ø–µ–ª–ª—è—Ü–∏–∏
                                </label>
                            </div>
                            <div class="form-check mt-2">
                                <input class="form-check-input" type="checkbox" id="checkbox-canceled" disabled>
                                <label class="form-check-label" for="checkbox-canceled">
                                    –û—Ç–º–µ–Ω–µ–Ω–æ –ø–æ –∏—Ç–æ–≥–∞–º –æ–±–∂–∞–ª–æ–≤–∞–Ω–∏—è
                                </label>
                            </div>
                            <small class="text-muted d-block mt-2">
                                ‚ö†Ô∏è –ß–µ–∫–±–æ–∫—Å "–û—Ç–º–µ–Ω–µ–Ω–æ" –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ—Ç–º–µ—á–µ–Ω–æ "–û–±–∂–∞–ª–æ–≤–∞–ª–æ—Å—å"
                            </small>
                        </div>
                        
                        <button class="btn btn-warning mt-3" id="btn-save-changes">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                        <div id="save-status" class="mt-2"></div>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">üìÑ –¢–µ–∫—Å—Ç —Ä–µ—à–µ–Ω–∏—è (—Ñ—Ä–∞–≥–º–µ–Ω—Ç)</label>
                        <div class="preview-box" id="preview-text">–¢–µ–∫—Å—Ç –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂—ë–Ω –∑–¥–µ—Å—å</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –¢–∞–±–ª–∏—Ü–∞ –∑–∞–ø–∏—Å–µ–π -->
        <div class="card mb-4" id="table-section" style="display: none;">
            <div class="card-header">üìä –í—Å–µ –∑–∞–ø–∏—Å–∏ –≤ –¥–∞—Ç–∞—Å–µ—Ç–µ</div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover" id="records-table">
                        <thead>
                            <tr>
                                <th>‚Ññ</th>
                                <th>–ù–æ–º–µ—Ä –¥–µ–ª–∞</th>
                                <th>–î–∞—Ç–∞ —Ä–µ—à–µ–Ω–∏—è</th>
                                <th>–î–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞</th>
                                <th>–û–±–∂–∞–ª–æ–≤–∞–Ω–æ</th>
                                <th>–û—Ç–º–µ–Ω–µ–Ω–æ</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                            </tr>
                        </thead>
                        <tbody id="records-body"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- –≠–∫—Å–ø–æ—Ä—Ç -->
        <div class="card mb-4" id="export-section" style="display: none;">
            <div class="card-header">üíæ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞—Ç–∞—Å–µ—Ç–∞</div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4">
                        <button class="btn btn-outline-primary w-100" id="btn-download-jsonl">
                            üì• –°–∫–∞—á–∞—Ç—å JSONL
                        </button>
                    </div>
                    <div class="col-md-4">
                        <button class="btn btn-outline-success w-100" id="btn-download-instruction">
                            üì• –°–∫–∞—á–∞—Ç—å Instruction Dataset
                        </button>
                    </div>
                    <div class="col-md-4">
                        <button class="btn btn-outline-secondary w-100" id="btn-download-zip">
                            üì¶ –°–∫–∞—á–∞—Ç—å ZIP-–∞—Ä—Ö–∏–≤
                        </button>
                    </div>
                </div>
                <div class="mt-3">
                    <p class="text-muted small">
                        ‚ÑπÔ∏è –í—Å–µ —Ñ–∞–π–ª—ã —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ. –î–∞–Ω–Ω—ã–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä.
                    </p>
                    <!-- –ü—Ä–∏–º–µ—Ä —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏ –∏–ª–∏ –±–ª–æ–∫–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
                        <button id="btn-clear-data" class="btn btn-danger btn-sm w-100">
                            üóë –û—á–∏—Å—Ç–∏—Ç—å –¥–∞—Ç–∞—Å–µ—Ç
                        </button>
                        <small class="text-muted d-block mt-1" style="font-size: 0.75rem;">
                            –£–¥–∞–ª—è–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø–∞–º—è—Ç–∏ –±—Ä–∞—É–∑–µ—Ä–∞
                        </small>


                    
                    <button class="btn btn-link btn-sm" type="button" data-bs-toggle="collapse" 
                            data-bs-target="#exportInfo">
                        ‚ÑπÔ∏è –û–ø–∏—Å–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤ —ç–∫—Å–ø–æ—Ä—Ç–∞
                    </button>
                    <div class="collapse" id="exportInfo">
                        <div class="card card-body bg-light">
                            <h6>üìÑ JSONL (–û—Å–Ω–æ–≤–Ω–æ–π –¥–∞—Ç–∞—Å–µ—Ç)</h6>
                            <p>–§–æ—Ä–º–∞—Ç: JSON Lines (–æ–¥–Ω–∞ JSON-–∑–∞–ø–∏—Å—å –Ω–∞ —Å—Ç—Ä–æ–∫—É)<br>
                            –ü–æ–ª—è: <code>case_number</code>, <code>decision_date</code>, 
                            <code>decision_text</code>, <code>appealed</code>, <code>canceled</code>, <code>metadata</code><br>
                            –ö–æ–¥–∏—Ä–æ–≤–∫–∞: UTF-8</p>
                            
                            <h6>üìö Instruction Dataset</h6>
                            <p>–§–æ—Ä–º–∞—Ç: JSON Lines —Å –ø–æ–ª—è–º–∏ <code>instruction</code>, 
                            <code>input</code>, <code>output</code><br>
                            –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: Fine-tuning LLM (LoRA, QLoRA)</p>
                            
                            <h6>üì¶ ZIP-–∞—Ä—Ö–∏–≤</h6>
                            <p>–í–∫–ª—é—á–∞–µ—Ç: –æ—Å–Ω–æ–≤–Ω–æ–π –¥–∞—Ç–∞—Å–µ—Ç, –∏–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç, 
                            —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É CSV –∏ README</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-dark text-white text-center py-3">
        <p class="mb-0">‚öñÔ∏è –°–±–æ—Ä—â–∏–∫ –¥–∞—Ç–∞—Å–µ—Ç–∞ —Å—É–¥–µ–±–Ω—ã—Ö –∞–∫—Ç–æ–≤ | –í–µ—Ä—Å–∏—è 2.0</p>
        <p class="mb-0 small">–î–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ</p>
    </footer>

    <!-- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  
    <script type="module">
        import { PDFTextReader } from 'https://esm.sh/pdf-text-reader@5.1.1';
        window.PDFTextReader = PDFTextReader;
        console.log('‚úÖ PDFTextReader –∑–∞–≥—Ä—É–∂–µ–Ω');
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    </script>
    
    <!-- –í–∞—à–∏ —Å–∫—Ä–∏–ø—Ç—ã -->
    <script src="js/jsonl-handler.js"></script>
    <script src="js/pdf-processor.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
